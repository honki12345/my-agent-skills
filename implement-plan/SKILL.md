---
name: implement-plan
description: "계획 문서를 인자로 받아 계획 범위 내에서만 구현한다. 계획 이탈/모순/불확실 상황은 사유와 대안을 보고하고 사용자 승인 후 진행한다. 계획 문서에 테스트 항목이 있으면 전체 통과까지 시도한다."
argument-hint: "[plan-file-path]"
disable-model-invocation: true
---

# Implement Plan

계획 문서를 실행 가능한 구현 작업으로 옮기는 작업용 스킬이다.

핵심 원칙:

1. 계획 문서 기준 구현
- 구현 범위는 계획 문서에 명시된 목표/범위/단계/제약 안으로 제한한다.
- 계획에 없는 임의 확장(기능 추가, 대규모 리팩토링, 아키텍처 변경)을 하지 않는다.

2. 승인 게이트
- 계획대로 진행할 수 없거나 다른 방향이 필요하면 즉시 멈추고 사용자 승인부터 받는다.
- 승인 전에는 해당 방향의 코드 변경을 진행하지 않는다.

3. 테스트 완료 우선
- 계획 문서에 테스트 항목이 있으면 가능한 범위에서 모두 실행하고 통과까지 시도한다.

## 사용법

- 호출 예시: `/implement-plan docs/plan/feature-x.md`
- 인자가 없으면 계획 문서 경로를 요청하고 중단한다.

## 실행 워크플로우

### 1단계: 계획 문서 로드

1. `$ARGUMENTS`에서 계획 문서 경로를 추출한다.
2. 경로가 없으면 경로 입력 요청 후 중단한다.
3. 파일이 없으면 오류를 안내하고 중단한다.

### 2단계: 계획 해석

계획 문서에서 아래를 추출한다.

- 목표와 완료 기준
- 구현 범위(포함/제외)
- 수정 대상 파일/모듈(명시된 경우)
- 기술 제약/의사결정
- 테스트 항목(테스트 명세, 명령, 검증 기준)

추출 결과를 간단히 요약한 뒤 구현을 시작한다.

### 3단계: 계획 기준 구현

1. 계획 단계 순서대로 구현한다.
2. 각 변경은 계획 항목에 매핑되도록 유지한다.
3. 구현 중 발견한 미정/모호/충돌 사항은 바로 4단계 승인 게이트로 이동한다.

### 4단계: 승인 게이트 (필수)

아래 상황이면 반드시 사용자에게 보고하고 승인받는다.

- 계획 문서가 실제 코드 구조와 맞지 않음
- 계획의 기술 선택이 현재 환경에서 동작 불가
- 계획에 없는 추가 변경이 필요
- 계획 문구가 모호해서 구현 방향이 2개 이상 가능
- 테스트 통과를 위해 계획 외 수정이 필요한 경우

보고 형식:

```markdown
[승인 필요]
- 이슈: {무엇이 문제인지}
- 이유: {왜 계획대로 진행 불가한지}
- 제안안 A: {가장 보수적인 대안}
- 제안안 B: {다른 대안}
- 권장안: {A 또는 B, 이유}
- 예상 영향: {범위/리스크/테스트 영향}

진행할 옵션을 선택해 주세요.
```

사용자 승인 전까지는 관련 구현을 진행하지 않는다.

### 5단계: 테스트 실행 및 통과 시도

계획 문서에 테스트 항목이 있으면 아래 순서로 수행한다.

1. 계획 문서에 명시된 테스트를 우선 실행한다.
2. 테스트 실패 시 원인을 수정하고 재실행한다.
3. 계획 범위 내 수정으로 해결 불가하면 4단계 승인 게이트로 이동한다.
4. 가능한 한 전체 테스트 항목이 통과할 때까지 반복한다.

테스트 항목이 없으면:
- "계획 문서에 테스트 항목이 명시되지 않음"을 명확히 보고한다.

### 6단계: 결과 보고

작업 종료 시 아래를 보고한다.

- 계획 대비 구현 완료 항목
- 사용자 승인으로 처리된 이탈/대안 내역
- 실행한 테스트 목록과 최종 결과(PASS/FAIL)
- 남은 리스크 또는 후속 필요 작업

## 절대 금지

- 승인 없이 계획 외 구현 진행
- 테스트 실패 상태를 숨기고 완료 처리
- 계획 문서에 없는 요구사항을 완료된 것처럼 보고
